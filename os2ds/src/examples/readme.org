
* smb
#+begin_src sh
pip install impacket
sudo apt install samba smbclient
#+end_src

Run ~smbserver.py~ with root privileges, but using my =virtual env=
#+begin_src sh
alias spython='sudo $(printenv VIRTUAL_ENV)/bin/python3'
spython smbserver.py -comment "os2 share" -username guest -password guest -ts -smb2support os2-data ./data
# test
smbclient --user=guest //127.0.0.1/os2-data
#+end_src
Check the ~-m SMB2~ option for ~smbclient~.


[[https://serverfault.com/a/166255][List shares on network]]
#+begin_src sh
nmblookup -S '*'
#+end_src

** change samba protocol
: protocol negotiation failed: NT_STATUS_NOT_SUPPORTED

then either add ~-smb2support~ when calling ~smbserver.py~ or try [[https://unix.stackexchange.com/a/585339][adding]] (under =GLOBAL=)
#+begin_src sh
vi /etc/samba/smb.conf
client min protocol = CORE
client max protocol = SMB3
#+end_src
